/* ========================================================== */
/*           File CSS Principale - Home Page             */
/* ========================================================== */
html { box-sizing: border-box; }
*, *::before, *::after { box-sizing: inherit; margin: 0; padding: 0; }
body { 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
    line-height: 1.6; background-color: #f8f9fa; color: #343a40; 
    display: flex; flex-direction: column; min-height: 100vh; position: relative; 
}
body.modal-open { overflow: hidden; }
.loader-container {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: #f8f9fa; display: flex; flex-direction: column; 
    justify-content: center; align-items: center; z-index: 9999;
    transition: opacity 0.3s ease-out, visibility 0.3s ease-out;
}
.loader-spinner {
    border: 5px solid #e9ecef; border-top: 5px solid #0056a8;
    border-radius: 50%; width: 50px; height: 50px;
    animation: spin 1s linear infinite;
}
.loader-container p { margin-top: 15px; color: #6c757d; font-size: 1.1em; }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
.app-header { display: flex; align-items: center; justify-content: space-between; padding: 10px 30px; background-color: #ffffff; box-shadow: 0 2px 5px rgba(0, 86, 168, 0.1); position: sticky; top: 0; z-index: 1000; }
.logo { height: 45px; width: auto; flex-shrink: 0; }
.header-controls { display: flex; align-items: center; gap: 15px; }
.admin-button { background: none; border: none; color: #0056a8; font-size: 1.8em; cursor: pointer; }
.admin-button:hover { color: #d71920; }
#login-section { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; margin: 20px auto; background-color: #fff; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); max-width: 400px; }
#login-section h2 { color: #0056a8; margin-bottom: 20px; }
.form-group { margin-bottom: 15px; width: 100%; }
.form-group label { display: block; margin-bottom: 5px; font-weight: 500; }
#login-section .form-group input { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; }
.btn-login { background-color: #0056a8; color: white; padding: 12px 20px; border: none; border-radius: 4px; cursor: pointer; width: 100%; font-size: 1em; }
.btn-login:hover { background-color: #004182; }
#login-error { color: #dc3545; margin-top: 10px; font-size: 0.9em; min-height: 1.2em; }
#user-dashboard { text-align: right; }
#user-dashboard p { margin: 0 0 10px 0; font-size: 0.9em; }
#logout-button { background-color: #6c757d; color: white; padding: 8px 15px; font-size: 0.9em; }
#content-area { padding: 30px; flex-grow: 1; margin: 20px; border-radius: 8px; box-shadow: 0 0 15px rgba(0, 0, 0, 0.07); }
#app-content { display: flex; flex-direction: column; align-items: center; }
.welcome-message { text-align: center; margin-bottom: 30px; }
.welcome-message h2 { color: #0056a8; font-size: 2em; margin-bottom: 5px; }
.welcome-message p { font-size: 1.1em; color: #6c757d; }
.main-nav { display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; max-width: 900px; margin: 0 auto 20px auto; }
.nav-button { padding: 12px 25px; font-size: 16px; font-weight: 600; cursor: pointer; border: none; border-radius: 6px; background-color: #0056a8; color: white; transition: all 0.2s ease; display: inline-flex; align-items: center; text-decoration: none; }
.nav-button i { margin-right: 8px; }
.nav-button:hover { background-color: #004182; transform: translateY(-2px); }
.nav-button.active { background-color: #003566; }
.submenu { background-color: #f8f9fa; border-radius: 6px; padding: 0 15px; overflow: hidden; max-height: 0; opacity: 0; display: flex; justify-content: center; gap: 10px; transition: all 0.4s ease-out; margin: 0 auto 0; border: 1px solid #e0e0e0; }
.submenu.visible { max-height: 200px; opacity: 1; padding: 15px; margin-bottom: 25px; }
.submenu-button { padding: 8px 16px; font-size: 14px; font-weight: 500; cursor: pointer; border: none; border-radius: 5px; background-color: #e8f0f7; color: #0056a8; display: inline-flex; align-items: center; text-decoration: none; }
.submenu-button i { margin-right: 6px; }
.submenu-button:hover { background-color: #d71920; color: white; }
#search-container { margin: 25px auto; max-width: 800px; width: 100%; }
#search-input { width: 100%; padding: 12px 15px; font-size: 1.1em; border: 1px solid #ccc; border-radius: 6px; }
#search-results { margin-top: 5px; max-height: 400px; overflow-y: auto; border: 1px solid #ddd; border-radius: 6px; background-color: #fff; box-shadow: 0 4px 12px rgba(0,0,0,0.1); display: none; }
.result-item { display: flex; align-items: center; gap: 15px; padding: 12px 15px; border-bottom: 1px solid #eee; color: #343a40; text-decoration: none; transition: background-color 0.2s; cursor: pointer; }
.result-item:hover { background-color: #f5f5f5; }
.result-item-empty { padding: 15px; color: #6c757d; text-align: center; }
.admin-popup { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: #ffffff; padding: 25px 30px; border-radius: 8px; box-shadow: 0 5px 15px rgba(0,0,0,0.2); z-index: 1040; }
.close-panel-btn { position: absolute; top: 10px; right: 15px; background: none; border: none; font-size: 2em; line-height: 1; color: #aaa; cursor: pointer; }
.admin-popup h3 { margin-top: 0; margin-bottom: 20px; color: #0056a8; }
.overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); z-index: 1030; }
.hidden { display: none !important; }

/* ========================================================== */
/* === STILI DEFINITIVI PER MODALE (con Funzione Zoom) === */
/* ========================================================== */
#product-details-modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.75);
    z-index: 1050; 
    display: none; align-items: center; justify-content: center;
    padding: 20px;
    opacity: 0;
    transition: opacity 0.3s ease;
}
#product-details-modal-overlay.visible { display: flex; opacity: 1; }
.modal-container { background: #ffffff; padding: 25px 30px; border-radius: 8px; box-shadow: 0 5px 20px rgba(0,0,0,0.25); width: 100%; max-width: 950px; max-height: 90vh; position: relative; display: flex; flex-direction: column; }
.modal-header { display: flex; align-items: center; gap: 20px; padding-bottom: 15px; margin-bottom: 20px; border-bottom: 1px solid #e9e9e9; }
.modal-brand-logo { height: 40px; width: auto; max-width: 140px; object-fit: contain; flex-shrink: 0; }
.modal-header-main { display: flex; flex-direction: column; flex-grow: 1; }
.modal-title-group { display: flex; align-items: baseline; gap: 10px; }
.modal-title-group #modal-product-brand { font-size: 1.1rem; color: #6c757d; }
.modal-title-group #modal-product-model { font-size: 1.8rem; font-weight: 700; margin: 0; }
.modal-product-code { font-size: 0.9rem; color: #6c757d; margin-top: 4px; }
.modal-header-right { display: flex; align-items: center; gap: 15px; flex-shrink: 0; }
.modal-type-badge { background-color: #343a40; color: white; padding: 8px 12px; border-radius: 5px; text-align: center; font-size: 0.9em; font-weight: 500; line-height: 1.3; }
#modal-wifi-icon { font-size: 1.8em; color: #0d6efd; display: none; }
.modal-close-btn { position: absolute; top: 10px; right: 15px; background: transparent; border: none; font-size: 2.2rem; cursor: pointer; z-index: 10; }
.modal-body-split { display: flex; gap: 30px; flex-grow: 1; overflow: hidden; }

/* Colonna Sinistra e Nuova Logica Immagini */
.modal-left-panel { flex: 0 0 320px; display: flex; flex-direction: column; }
.modal-image-wrapper {
    position: relative; width: 100%; height: 380px;
    margin-bottom: 15px; border: 1px solid #eee;
    border-radius: 5px; overflow: hidden;
    cursor: zoom-in;
}
.modal-image-wrapper img {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    width: 100%; height: 100%; padding: 10px; object-fit: contain;
    transition: opacity 0.3s ease-in-out; background-color: transparent;
}
#modal-image-attachments { opacity: 0; pointer-events: none; }
.modal-image-wrapper:hover #modal-image-attachments { opacity: 1; pointer-events: all; }
.modal-image-wrapper:hover #modal-image-ui,
.modal-image-wrapper:hover #modal-image-ue {
    opacity: 0; pointer-events: none;
}
.zoom-icon {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    width: 60px; height: 60px;
    background-color: rgba(0, 0, 0, 0.5);
    color: white; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 1.5em;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
}
.modal-image-wrapper:hover .zoom-icon { opacity: 1; }
.modal-energy-badges-container { text-align: center; margin-bottom: 15px; }
.energy-badge { display: none; width: 38px; height: 38px; line-height: 38px; border-radius: 50%; color: white; text-align: center; font-weight: bold; font-size: 1em; box-shadow: 0 1px 3px rgba(0,0,0,0.2); margin: 0 5px; }
.energy-badge.visible { display: inline-block; }
.energy-badge.cooling { background-color: #0d6efd; }
.energy-badge.heating { background-color: #dc3545; }
.modal-bottom-info { margin-top: auto; width: 100%; padding-top: 15px; border-top: 1px solid #eee; }
.modal-product-price { font-size: 2.5rem; font-weight: 700; color: #0056a8; text-align: center; margin-bottom: 15px; }
#modal-datasheet-link { display: none; align-items: center; justify-content: center; background-color: #dc3545; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; width: 100%; }
#modal-datasheet-link.visible { display: flex; }
#modal-datasheet-link i { margin-right: 8px; }
.modal-right-panel { flex-grow: 1; overflow-y: auto; padding-right: 15px; }
#modal-tech-details h3 { font-size: 1.2rem; color: #0056a8; margin: 20px 0 10px 0; padding-bottom: 5px; border-bottom: 2px solid #e0e0e0; }
#modal-tech-details h3:first-child { margin-top: 0; }
#modal-tech-details ul { list-style: none; padding-left: 0; margin: 0; }
#modal-tech-details li { display: flex; align-items: flex-start; padding: 8px 0; border-bottom: 1px dotted #dcdcdc; line-height: 1.5; }
#modal-tech-details li::before { content: 'â€¢'; color: #0056a8; font-weight: bold; font-size: 1.2em; margin-right: 12px; line-height: 1.4; }
#modal-tech-details li strong { margin-right: 5px; }
#modal-tech-details li span { text-align: left; flex-grow: 1; }

/* --- VISUALIZZATORE IMMAGINI (LIGHTBOX) --- */
.image-viewer-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.85);
    z-index: 1100; /* Sopra a tutto */
    display: none; justify-content: center; align-items: center;
    padding: 20px;
    opacity: 0;
    transition: opacity 0.3s ease;
}
.image-viewer-overlay.visible { display: flex; opacity: 1; }
#viewer-image { max-width: 110%; max-height: 110%; object-fit: contain; box-shadow: 0 5px 25px rgba(0,0,0,0.5); }
.viewer-close-btn { 
    position: absolute; top: 15px; right: 25px;
    color: white; font-size: 3em; cursor: pointer;
    background: none; border: none; z-index: 1110;
    text-shadow: 0 1px 3px rgba(0,0,0,0.7);
}

/* ========================================================== */
/*           Stili Specifici per la pagina Gas             */
/* ========================================================== */
#gas-management-content {
    max-width: 1200px;
    margin: 20px auto;
    padding: 25px;
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}
#gas-management-content h2 {
    color: #0056a8;
    margin-bottom: 20px;
    text-align: center;
}
#gas-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    gap: 15px;
    flex-wrap: wrap;
}
#gas-search-input {
    flex-grow: 1;
    padding: 10px 15px;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-size: 1em;
    max-width: 400px;
}
#add-gas-button {
    background-color: #28a745;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1em;
    display: flex;
    align-items: center;
    gap: 8px;
}
#add-gas-button:hover {
    background-color: #218838;
}
.gas-table-container {
    overflow-x: auto;
    margin-top: 20px;
}
.gas-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.9em;
}
.gas-table th, .gas-table td {
    border: 1px solid #ddd;
    padding: 10px;
    text-align: left;
    vertical-align: top;
}
.gas-table th {
    background-color: #f2f2f2;
    font-weight: 600;
    color: #343a40;
    position: sticky;
    top: 0;
    z-index: 1; /* Assicura che le intestazioni rimangano sopra il contenuto scrollabile */
}
.gas-table tbody tr:nth-child(even) {
    background-color: #f8f8f8;
}
.gas-table tbody tr:hover {
    background-color: #e9ecef;
}
.gas-table .actions-cell {
    white-space: nowrap; /* Evita che i bottoni vadano a capo */
    width: 1%; /* Tenta di adattarsi al contenuto */
}
.gas-table .action-btn {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1.1em;
    margin: 0 5px;
    color: #0056a8;
}
.gas-table .action-btn.edit:hover { color: #004182; }
.gas-table .action-btn.delete { color: #dc3545; }
.gas-table .action-btn.delete:hover { color: #c82333; }

/* Modal per Aggiunta/Modifica Bombola Gas */
#gas-modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0,0,0,0.6);
    z-index: 1060;
    display: flex; justify-content: center; align-items: center;
    /* MODIFICHE PER FISSARE IL LAYOUT */
    padding: 20px; /* Aggiunge un po' di respiro ai bordi */
    box-sizing: border-box; /* Assicura che padding non espanda la width/height oltre il 100% */

    opacity: 0; 
    visibility: hidden; 
    transition: opacity 0.3s ease, visibility 0.3s ease;
}
#gas-modal-overlay.visible {
    opacity: 1; 
    visibility: visible;
}
.gas-modal-container {
    background: #ffffff; 
    padding: 25px 30px; 
    border-radius: 8px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2); 
    width: 100%; /* Permette di occupare la larghezza disponibile */
    max-width: 600px; /* Limita la larghezza massima del modal */
    position: relative;
    /* NEW: Per prevenire overflow del contenuto interno */
    overflow-y: auto; 
    max-height: 90vh; /* Limita l'altezza del modal, aggiunge scroll se necessario */
    box-sizing: border-box; /* Molto importante per padding e larghezza */
}
.gas-modal-container h3 {
    color: #0056a8; margin-top: 0; margin-bottom: 20px;
    text-align: center;
}
.gas-modal-container .form-group {
    margin-bottom: 15px;
}
.gas-modal-container .form-group label {
    display: block; margin-bottom: 5px; font-weight: 500;
}
.gas-modal-container .form-group input,
.gas-modal-container .form-group select {
    width: 100%; 
    padding: 10px; 
    border: 1px solid #ccc; 
    border-radius: 4px;
    font-size: 1em;
    box-sizing: border-box; /* Essenziale qui per evitare overflow */
}
.gas-modal-buttons {
    display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px;
}
.gas-modal-buttons .btn {
    padding: 10px 20px; border-radius: 5px; cursor: pointer;
    font-size: 1em;
}
.gas-modal-buttons .btn-primary {
    background-color: #0056a8; color: white; border: none;
}
.gas-modal-buttons .btn-primary:hover { background-color: #004182; }
.gas-modal-buttons .btn-secondary {
    background-color: #6c757d; color: white; border: none;
}
.gas-modal-buttons .btn-secondary:hover { background-color: #5a6268; }
.gas-modal-close-btn {
    position: absolute; top: 10px; right: 15px; background: none; border: none;
    font-size: 2em; line-height: 1; color: #aaa; cursor: pointer;
    z-index: 1; /* Assicura che il pulsante sia cliccabile */
}
.feedback-message {
    margin-top: 15px;
    padding: 10px;
    border-radius: 5px;
    text-align: center;
}
.feedback-message.success {
    background-color: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}
.feedback-message.error {
    background-color: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}
