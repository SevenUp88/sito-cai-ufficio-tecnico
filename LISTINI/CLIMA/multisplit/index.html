<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Listino Climatizzatori - C.A.I. - Configuratore</title>
    <!-- CSS è nella stessa cartella -->
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body> <!-- Classe 'operator-mode' o 'admin-mode' aggiunta da JS -->

    <header class="app-header">
        <!-- AGGIORNATO percorso HOME: ../../../ per salire da multisplit, CLIMA, LISTINI -->
        <a href="../../../HOME/index.html" title="C.A.I. - Home">
             <!-- Mantenuto link esterno Postimg per logo header -->
             <img src="https://i.postimg.cc/Z5b3Yvr0/LOGO-CAI.png" alt="Logo CAI Consorzio Artigiani Idraulici" class="logo">
        </a>
        <div class="header-controls">
            <button id="print-button" class="header-action-button" title="Stampa Listino / Riepilogo">
                <i class="fas fa-print"></i>
            </button>
            <!-- AGGIORNATO percorso HOME -->
            <a href="../../../HOME/index.html" class="header-action-button" title="Torna alla Home">
                <i class="fas fa-home"></i>
            </a>
            <button id="admin-trigger" class="header-action-button" title="Accesso Admin Listini (Solo Monosplit)">
                <i class="fas fa-user-shield"></i>
            </button>
            <button id="exit-admin-button" class="header-action-button" title="Esci Modalità Admin" style="display: none;">
                 <i class="fas fa-user-slash"></i>
            </button>
        </div>
    </header>

    <div class="container">
        <div class="page-controls"> <!-- Sticky -->
             <h1>Listino Climatizzatori</h1>
             <!-- Filtri Monosplit (nascosti di default, gestiti da JS) -->
             <div class="filters" id="monosplit-filters" style="display: none;">
                 <span>Filtra Monosplit:</span>
                 <button class="filter-btn" data-filter-type="brand" data-brand="all">Tutte le Marche</button>
                 <button class="filter-btn" data-filter-type="brand" data-brand="DAIKIN">Daikin</button>
                 <button class="filter-btn" data-filter-type="brand" data-brand="HAIER">Haier</button>
                 <button class="filter-btn" data-filter-type="brand" data-brand="HITACHI">Hitachi</button>
                 <button class="filter-btn" data-filter-type="brand" data-brand="IMMERGAS">Immergas</button>
                 <button class="filter-btn" data-filter-type="brand" data-brand="INNOVA">Innova</button>
                 <button class="filter-btn" data-filter-type="brand" data-brand="LG">LG</button>
                 <button class="filter-btn" data-filter-type="brand" data-brand="MITSUBISHI">Mitsubishi</button>
                 <button class="filter-btn" data-filter-type="brand" data-brand="SAMSUNG">Samsung</button>
                 <button class="filter-btn" data-filter-type="brand" data-brand="TOSHIBA">Toshiba</button>
                 <button class="filter-btn" data-filter-type="brand" data-brand="VIESSMANN">Viessmann</button>
                 <button class="filter-btn" data-filter-type="economic">Economici</button>
             </div>
             <!-- Tabs per Sezioni -->
             <div class="section-tabs">
                 <button class="tab-btn" data-section="monosplit">Listino Monosplit</button>
                 <button class="tab-btn active" data-section="multisplit">Configuratore Multisplit</button>
             </div>
        </div>

        <main>
            <div class="sections-wrapper">
                <!-- Sezione Monosplit (Inizialmente Nascosta) -->
                <section id="monosplit-section" class="content-section">
                     <h2>Listino Monosplit</h2>
                    <div id="monosplit-grid" class="product-grid">
                        <div class="loading-placeholder">Caricamento prodotti Monosplit...</div>
                    </div>
                </section>

                <!-- Sezione Multisplit (Inizialmente Visibile) -->
                <section id="multisplit-section" class="content-section active-section">
                    <h2>Configuratore Multisplit</h2>
                    <div id="multi-configurator" class="multi-configurator-layout">

                        <!-- Colonna Sinistra: Controlli di Configurazione -->
                        <div class="config-controls">
                            <!-- Step 1: Scelta Marca -->
                            <div id="step-1-brand" class="config-step active-step">
                                <h3>1. Seleziona la Marca</h3>
                                <div id="brand-selection" class="brand-grid">
                                    <p class="loading-placeholder">Caricamento marche...</p>
                                </div>
                                <p class="step-message" id="brand-message"></p>
                            </div>

                            <!-- Step 2: Scelta Tipo Split -->
                            <div id="step-2-split-type" class="config-step">
                                <h3>2. Seleziona il Tipo di Sistema</h3>
                                <div id="split-type-selection" class="button-group">
                                    <!-- Bottoni (Dual, Trial, etc.) caricati da JS -->
                                </div>
                                <p class="step-message" id="split-type-message"></p>
                            </div>

                            <!-- Step 3: Scelta Unità Esterna -->
                            <div id="step-3-outdoor-unit" class="config-step">
                                <h3>3. Seleziona l'Unità Esterna</h3>
                                <div id="outdoor-unit-selection">
                                    <select id="outdoor-unit-select" class="config-select" disabled>
                                        <option value="">-- Prima seleziona Marca e Tipo --</option>
                                        <!-- Opzioni caricate da JS -->
                                    </select>
                                </div>
                                <p class="step-message" id="outdoor-unit-message"></p>
                            </div>

                            <!-- Step 4: Scelta Unità Interne -->
                            <div id="step-4-indoor-units" class="config-step">
                                <h3>4. Seleziona le Unità Interne</h3>
                                <div id="indoor-units-selection" class="indoor-selectors-container">
                                    <!-- Selectors per UI caricati da JS -->
                                     <p>Seleziona l'unità esterna per continuare.</p>
                                </div>
                                <p class="step-message" id="indoor-units-message"></p>
                            </div>

                             <!-- Azioni Finali -->
                             <div id="step-5-actions" class="config-step">
                                 <h3>5. Riepilogo e Azioni</h3>
                                 <div class="final-actions button-group">
                                     <button id="reset-config-btn" class="config-button secondary"><i class="fas fa-undo"></i> Ricomincia</button>
                                     <button id="print-config-btn" class="config-button primary" disabled><i class="fas fa-print"></i> Stampa Riepilogo</button>
                                 </div>
                                 <p class="step-message" id="actions-message">Completa la configurazione per stampare.</p>
                             </div>
                        </div>

                        <!-- Colonna Destra: Riepilogo Configurazione -->
                        <div class="config-summary-wrapper">
                             <div id="summary-panel" class="summary-panel">
                                 <h4>Riepilogo Configurazione</h4>
                                 <div id="summary-content">
                                     <p class="summary-placeholder">Seleziona le opzioni a sinistra per iniziare...</p>
                                     <div id="summary-brand" class="summary-item" style="display: none;">
                                         <img id="summary-brand-logo" src="" alt="Logo Marca" />
                                         <span id="summary-brand-name"></span>
                                     </div>
                                     <div id="summary-outdoor" class="summary-item" style="display: none;">
                                         <strong>Unità Esterna:</strong>
                                         <p id="summary-outdoor-details"></p>
                                         <p id="summary-outdoor-price" class="summary-price"></p>
                                     </div>
                                     <div id="summary-indoor-list" class="summary-item" style="display: none;">
                                         <strong>Unità Interne:</strong>
                                         <ul id="summary-indoor-items">
                                             <!-- Items UI aggiunti da JS -->
                                         </ul>
                                     </div>
                                 </div>
                                 <div id="summary-total" class="summary-total" style="display: none;">
                                     <strong>Totale Provvisorio:</strong>
                                     <span id="summary-total-price">€ 0,00</span>
                                 </div>
                                 <div id="summary-ref" class="summary-ref" style="display: none;">
                                     <strong>Riferimento:</strong>
                                     <span id="summary-reference-code"></span>
                                 </div>
                            </div>
                        </div>
                    </div>
                    <!-- Area Nascosta per la Stampa della Configurazione -->
                    <div id="print-config-area" style="display:none;">
                        <!-- Contenuto da stampare generato dinamicamente da JS -->
                    </div>
                </section>

            </div> <!-- Fine sections-wrapper -->
        </main>

        <footer class="app-footer">
             <p>&copy; 2025 C.A.I - Consorzio Artigiani Idraulici </p>
             <!-- <p class="data-info">Dati aggiornati al: GG/MM/AAAA</p> -->
        </footer>
    </div> <!-- Fine container -->

    <!-- Pannello Password Admin (per Monosplit) -->
    <div id="password-panel">
        <button id="close-panel-btn" title="Chiudi pannello">&times;</button>
        <h3>Accesso Amministratore</h3>
        <p>Inserisci la password per abilitare le modifiche (solo listino Monosplit).</p>
        <div class="form-group">
            <label for="admin-password">Password:</label>
            <input type="password" id="admin-password" name="admin-password">
        </div>
        <button id="submit-password-btn">Accedi</button>
        <p id="password-error" class="error-message"></p>
    </div>

    <!-- Tooltip per le dimensioni (Monosplit) -->
    <div id="dimension-tooltip">
        <!-- CORRETTO percorso immagine: ../images/ per salire da multisplit -->
        <img src="../images/dimensioni_blueprint.png" alt="Schema dimensioni UI/UE">
        <div id="tooltip-ui-dimensions" class="tooltip-dimension-text"></div>
        <div id="tooltip-ue-dimensions" class="tooltip-dimension-text"></div>
    </div>

    <!-- Scripts -->
    <script src="data.js"></script>      <!-- Dati Monosplit -->
    <script src="multi_data.js"></script> <!-- Dati Multisplit -->
    <script src="script.js"></script>    <!-- Logica Applicazione -->
</body>
</html>