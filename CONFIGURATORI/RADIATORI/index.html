<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAI - Configuratore Radiatori</title>
    
    <!-- *** QUESTO È IL COLLEGAMENTO CORRETTO PER TROVARE IL style.css NELLA CARTELLA ATTUALE *** -->
    <link rel="stylesheet" href="style.css"> 
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Nota: se per caso avessi delle classi definite globalmente nel tuo style.css principale, 
         potresti comunque volerlo includere ANCHE qui per mantenere alcuni stili comuni.
         In quel caso, NON sarebbe style.css (che sta nella cartella attuale)
         ma ../style.css per quello principale. Dipende dalla tua struttura interna.
         Se hai solo stili per questa pagina in style.css qui dentro, questo è sufficiente. -->

</head>
<body>
    <!-- === HEADER GENERALE (COPIA IL TUO HEADER DALLA HOME O LASCIALO PIU' SEMPLICE PER LA PAGINA CONFIGURATORE) === -->
    <header class="app-header">
        <img src="https://raw.githubusercontent.com/SevenUp88/sito-cai-ufficio-tecnico/main/LOGO%20CAI_.png" alt="Logo Ufficio Tecnico CAI" class="logo">
        <div class="header-controls">
            <!-- -->
        </div>
    </header>

    <main id="content-area">
        <h2 class="page-title configurator-title">CONFIGURATORE RADIATORI</h2>
        
        <div class="radiator-configurator-container">

            <!-- COLONNA DI SINISTRA: SELEZIONE LOCALI DINAMICA -->
            <div class="configurator-col left-col">
                <div class="local-selector-box">
                    <h3 class="local-selector-title">SELETTORE LOCALI</h3>
                    <div id="added-locals-container"></div>

                    <div id="add-local-form">
                        <h4>AGGIUNGI NUOVA STANZA</h4>
                        <div class="form-group">
                            <label for="local-type-select">Tipo di Locale:</label>
                            <select id="local-type-select">
                                <option value="">Seleziona...</option>
                                <option value="BAGNO">Bagno</option>
                                <option value="CUCINA">Cucina</option>
                                <option value="CORRIDOIO">Corridoio</option>
                                <option value="CAMERA SINGOLA">Camera Singola</option>
                                <option value="CAMERA MATRIMONIALE">Camera Matrimoniale</option>
                                <option value="STUDIO">Studio</option>
                                <option value="SOGGIORNO">Soggiorno</option>
                                <option value="GARAGE">Garage</option>
                                <option value="ALTRO">Altro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="local-sqm-input">Metri Quadri (MQ):</label>
                            <input type="number" id="local-sqm-input" placeholder="Es. 15" min="1" required>
                        </div>
                        <div class="form-group">
                            <label for="local-height-input">Altezza Locale (m):</label>
                            <input type="number" id="local-height-input" placeholder="Es. 2.70" step="0.10" min="1.5" value="2.70">
                        </div>
                        
                        <button id="add-local-btn" class="btn-add-local">
                            <i class="fas fa-plus"></i> Aggiungi Locale
                        </button>
                    </div>
                </div>
            </div>

            <!-- COLONNA DI DESTRA: INFORMAZIONI ABITAZIONE, IMPIANTO & PROGETTO -->
            <div class="configurator-col right-col">
                <div class="housing-info-box">
                    <h3 class="box-title">INFORMAZIONI ABITAZIONE</h3>
                    <div class="form-group"><label for="habitation-type">Tipologia Edificio:</label><select id="habitation-type"><option value="RESIDENZIALE_MODERNO">Residenziale (Moderno, Buon Isolamento)</option><option value="RESIDENZIALE_TRADIZIONALE">Residenziale (Tradizionale, Isolamento Medio)</option><option value="COMMERCIALE">Commerciale/Uffici</option><option value="VECCHIO_EDIFICIO">Vecchia Costruzione (Isolamento scarso)</option><option value="ALTA_EFFICIENZA">Alta Efficienza Energetica</option></select></div>
                    <div class="form-group"><label for="habitation-isolation">Livello di Isolamento:</label><select id="habitation-isolation"><option value="BUONO">Buono</option><option value="MEDIO">Medio</option><option value="BASSO">Basso</option></select></div>
                    <div class="form-group"><label for="design-temperature-input">Temp. Ambiente Desiderata (°C):</label><input type="number" id="design-temperature-input" value="20" placeholder="Es: 20" min="15" max="28"></div>
                    <div class="form-group"><label for="outside-design-temp-input">Temp. Esterna di Progetto (°C):</label><input type="number" id="outside-design-temp-input" value="-5" placeholder="Es: -5"><small>Valore tipico per zona climatica media italiana.</small></div>
                </div>

                <hr class="section-separator">

                <div class="housing-info-box">
                    <h3 class="box-title">INFORMAZIONI IMPIANTO</h3>
                    <div class="form-group"><label for="radiator-brand">Marca Radiatore:</label><select id="radiator-brand"><option value="IRSAP">IRSAP</option></select></div>
                    <div class="form-group"><label for="radiator-model">Modello Radiatore:</label><select id="radiator-model" required><option value="">Seleziona...</option><!-- Opzioni per TESI saranno aggiunte da JS --></select></div>
                    <div class="form-group"><label for="radiator-element-config">Configurazione Elemento:</label><input type="text" id="radiator-element-config" readonly placeholder="Seleziona modello per vedere dettagli"></div>
                    <div class="form-group"><label for="radiator-element-power-base">Potenza Base per Elemento (W):</label><input type="text" id="radiator-element-power-base" readonly placeholder="Seleziona modello"><small>Potenza a 75/65°C.</small></div>
                    <div class="form-group"><label for="radiator-temp-ref">Temp. Riferimento Potenza:</label><input type="text" id="radiator-temp-ref" readonly placeholder="Seleziona modello"></div>
                </div>
                 <hr class="section-separator">
                
                <div class="configurator-action">
                    <button id="calculate-radiator-system" class="btn-calculate">
                        <i class="fas fa-calculator"></i> Calcola Impianto
                    </button>
                </div>

                <div id="calculation-results" class="results-display hidden">
                    <h3 class="results-title">PROGETTO IMPIANTO</h3>
                    <p class="summary-info">Riepilogo del fabbisogno termico calcolato.</p>
                    <div class="project-summary">
                         <div class="summary-line"><span class="label">Superficie Totale Abitazione:</span><span id="total-habitation-sqm" class="value"></span></div>
                         <div class="summary-line"><span class="label">Volume Totale da Riscaldare:</span><span id="total-habitation-volume" class="value"></span></div>
                        <div class="summary-line"><span class="label">Fabbisogno Termico Abitazione Stimato:</span><span id="total-habitation-demand" class="value"></span></div>
                    </div>
                    
                    <h4>Dettaglio Stanze e Radiatori</h4>
                    <div class="results-table-container">
                        <table class="results-table">
                            <thead>
                                <tr>
                                    <th>Locale</th>
                                    <th>MQ</th>
                                    <th>Volume (mc)</th>
                                    <th>Fabb. Termico (W)</th>
                                    <th>Radiatore</th>
                                    <th>Elementi (n.)</th>
                                    <th>Pot. El. (W)</th>
                                    <th>Pot. Locale (W)</th>
                                </tr>
                            </thead>
                            <tbody id="results-tbody">
                                <!-- Dati verranno inseriti da JS -->
                            </tbody>
                        </table>
                    </div>
                     
                    <div class="total-price-summary">
                         <h3>Prezzo Totale Stimato Impianto</h3>
                         <div class="price-value" id="estimated-total-price">€ 0,00</div>
                    </div>
                     
                    <div id="calculation-error" class="error-message hidden"></div>
                </div>
            </div>
        </div>
    </div>
</main>

<!-- FOOTER (Opzionale) -->
<!-- <footer class="app-footer"></footer> -->

<!-- === SCRIPT PER IL FUNZIONAMENTO DEL CONFIGURATORE === -->
<!-- ASSICURATI CHE QUESTO SCRIPT SI TROVI NELLA CARTELLA RADIATORI -->
<script src="script.js"></script> 
